#include "led.h"
#include "usart.h"
#include "gpio.h"
#include<stdio.h>
#include<string.h>
int main()
{
	led2_init();
	usart_init();

	while(1)
	{
//		gpio_init();
//		led2_on();
//		for(int i=0;i<900000;i++){}
//		led2_off();
//		for(int i=0;i<900000;i++){}
//		char *data;
//		usart_receive_char(data);
//		usart_send_char(*data);
		usart_send_char('k');
//		if(*data == 'h')
//		{
//			led2_on();
//			for(int i=0;i<900000;i++){}
//		}
//		else
//		{
//			led2_off();
//			for(int i=0;i<900000;i++){}
//		}
//		uint8_t payLoad[100];
//		memset(payLoad,0,sizeof(payLoad));
//		sprintf(payLoad,"Hi, Hello world %d !\r\n",20);
//		//uint8_t payLoad[] = "Hi, Hello world" +20+"!\r\n";
//		usart_send_bytes(payLoad,sizeof(payLoad));
//		printf("Hello from STM32F4.........\n\r");
	}
}


//int main()
//{
//	gpio_init();
//	led2_init();
//	usart_init();
//	uint8_t payLoad[100];
//	while(1)
//	{
//	  if ( isButtonPressed() == 0 )
//	  {
//		  sprintf(payLoad,"BL_DEBUG_MSG:Button is pressed .. going to BL mode\n\r") ;
//		  usart_send_bytes(payLoad,sizeof(payLoad));
//		  //we should continue in bootloader mode
//		  bootloader_uart_read_data();
//
//	  }
//	  else
//	  {
//		  sprintf(payLoad,"BL_DEBUG_MSG:Button is not pressed .. executing user app\n" );
//		  usart_send_bytes(payLoad,sizeof(payLoad));
//			//jump to user application
//			bootloader_jump_to_user_app();
//
//	  }
//	}
//}
